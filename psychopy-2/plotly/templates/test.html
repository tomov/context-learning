<head>
    <script src="{{ url_for('static', filename='js/plotly-latest.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-3.1.1.min.js') }}"></script>
    <meta charset="utf-8" />
</head>

<body>
    <div id="tester" style="width:600px;height:250px;"></div>

    <script>
        x = [1, 2, 3, 4, 5];
        y = [10, 2, 4, 8, 16];
        TESTER = document.getElementById('tester');

        replot();

        function replot() {
            Plotly.newPlot( TESTER, [{
            x: x,
            y: y }], {
            margin: { t: 0 } } );
        }

        // setInterval(replot, 1000);

        $.get("{{ url_for('get_next') }}", function(data, status){
            trials = JSON.parse(data);
            x = [];
            y = [];
            corr = 0;
            len = trials.length;
            for (var i = 0; i < len; i++) {
                trial = trials[i];
                x.push(i + 1);
                if (trial[14] == "1")
                {
                    corr = corr + 1;
                }
                else
                {
                    // nothing
                }
                y.push(corr);

                replot();
            }
            //console.log(parsed_data);
            //alert("Data: " + data + "\nStatus: " + status);
        });
    </script>
</body>
